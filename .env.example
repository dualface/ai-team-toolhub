# ToolHub
# Environment profile: dev (default), staging, prod. Sets defaults; explicit env vars override.
TOOLHUB_PROFILE=dev
TOOLHUB_HTTP_PORT=8080
TOOLHUB_MCP_PORT=8090
TOOLHUB_HTTP_LISTEN=0.0.0.0:8080
TOOLHUB_MCP_LISTEN=0.0.0.0:8090

# Batch behavior: partial (default) or strict (stop on first GitHub error)
BATCH_MODE=partial

# Database (PostgreSQL)
POSTGRES_USER=toolhub
POSTGRES_PASSWORD=change_me
POSTGRES_DB=toolhub

# Artifact store (local directory mounted into container)
ARTIFACTS_DIR=/var/lib/toolhub/artifacts

# GitHub App auth
# Create a GitHub App under your personal account, install it to selected repos,
# then set the IDs below. Mount the private key at ./secrets/github_app_private_key.pem
GITHUB_APP_ID=123456
# Optional. Default is empty for auto-discovery when exactly one installation exists.
# Set explicitly when your App has multiple installations.
GITHUB_INSTALLATION_ID=
GITHUB_PRIVATE_KEY_PATH=/run/secrets/github_app_private_key.pem

# Safety allowlists (comma-separated)
REPO_ALLOWLIST=yourname/your-repo
TOOL_ALLOWLIST=github.issues.create,github.issues.batch_create,github.pr.comment.create,github.pr.get,github.pr.files.list,qa.test,qa.lint,runs.create,code.patch.generate,code.branch_pr.create,code.repair_loop
PATH_POLICY_FORBIDDEN_PREFIXES=.github/,infra/
PATH_POLICY_APPROVAL_PREFIXES=db/init/,toolhub/internal/db/migrations/

# Phase C QA execution (server-configured commands, not client-provided shell)
QA_WORKDIR=.
QA_TEST_CMD=go -C toolhub test ./...
QA_LINT_CMD=go -C toolhub test ./...
QA_TIMEOUT_SECONDS=600
# Optional repair loop cap. If unset, profile default is used. Allowed: 1..10
REPAIR_MAX_ITERATIONS=3
QA_MAX_OUTPUT_BYTES=262144
QA_MAX_CONCURRENCY=2
QA_BACKEND=local
QA_SANDBOX_IMAGE=golang:1.25
QA_SANDBOX_DOCKER_BIN=docker
QA_SANDBOX_CONTAINER_WORKDIR=/workspace
QA_ALLOWED_EXECUTABLES=go,make,pytest,python,python3,npm,npx,yarn,pnpm,ruff,eslint,golangci-lint

# Phase D.2 code write path (controlled git workflow)
CODE_WORKDIR=.
CODE_GIT_REMOTE=origin

# Optional proxy settings for docker build/runtime.
# If your host proxy is localhost/127.0.0.1, use host.docker.internal for containers.
# Example: TOOLHUB_HTTPS_PROXY=http://host.docker.internal:7890
TOOLHUB_HTTPS_PROXY=
TOOLHUB_HTTP_PROXY=
TOOLHUB_NO_PROXY=localhost,127.0.0.1,postgres,toolhub,host.docker.internal
